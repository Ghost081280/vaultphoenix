<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Vault Phoenix - AR $Ember Hunt</title>
    <link rel="icon" href="../images/VPLogoNoText.PNG" type="image/png">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body class="crypto-dashboard-page">
    <!-- CRYPTO GAME PROTECTION FLAG -->
    <div id="cryptoGameFlag" style="display: none;">CRYPTO_GAME_PAGE</div>
    
    <div id="gameContainer">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-content">
                <div class="nav-brand" id="homeBtn">
                    <div class="nav-logo">
                        <img src="../images/VPLogoNoText.PNG" alt="Phoenix Logo" class="nav-logo-image" onerror="this.textContent='üî•'">
                    </div>
                    <div class="nav-title">$Ember Hunt</div>
                </div>
                <div class="nav-actions">
                    <div class="ember-count" id="vaultBadge">
                        <img src="../images/VPEmberCoin.PNG" alt="Ember" class="ember-icon" onerror="this.textContent='üíé'">
                        <span class="ember-count-text" id="navEmberCount">0</span>
                    </div>
                    <button class="nav-menu-button" id="menuToggle">
                        <span id="menuIcon">‚ò∞</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Side Menu -->
        <div class="menu-overlay" id="menuOverlay"></div>
        <div class="side-menu" id="sideMenu">
            <div class="menu-header">
                <div class="menu-user">
                    <div class="menu-avatar">
                        <img src="../images/VPLogoNoText.PNG" alt="Avatar" class="avatar-image" onerror="this.textContent='üî•'">
                    </div>
                    <div class="menu-user-info">
                        <div class="menu-user-name">Phoenix Hunter</div>
                        <div class="menu-user-email">demo@vaultphoenix.com</div>
                    </div>
                </div>
            </div>
            
            <div class="menu-content">
                <div class="menu-section">
                    <div class="menu-section-title">Gaming</div>
                </div>
                
                <div class="menu-item active" data-mode="hunt" id="menuHunt">
                    <div class="menu-item-icon">üó∫Ô∏è</div>
                    <div class="menu-item-text">Token Hunt</div>
                </div>
                
                <div class="menu-item" data-mode="ar" id="menuAR">
                    <div class="menu-item-icon">üì±</div>
                    <div class="menu-item-text">AR View</div>
                    <div class="menu-item-badge" id="nearbyARTokens">Get closer</div>
                </div>
                
                <div class="menu-item" data-mode="vault" id="menuVault">
                    <div class="menu-item-icon">üîí</div>
                    <div class="menu-item-text">$Ember Vault</div>
                    <div class="menu-item-badge" id="menuEmberCount">0</div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Wallet</div>
                </div>
                
                <div class="menu-item" id="coinbaseWallet">
                    <div class="menu-item-icon">üè¶</div>
                    <div class="menu-item-text">Coinbase Wallet</div>
                </div>
                
                <div class="menu-item" id="redeemTokens">
                    <div class="menu-item-icon">üì±</div>
                    <div class="menu-item-text">Payment QR</div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Settings</div>
                </div>
                
                <div class="menu-item reset-game-item" id="resetGameBtn">
                    <div class="menu-item-icon">üîÑ</div>
                    <div class="menu-item-text">Reset Game</div>
                </div>
            </div>
            
            <div class="logout-section">
                <button class="logout-button" id="sideMenuLogout">
                    <span>üö™</span>
                    <span>Sign Out</span>
                </button>
            </div>
        </div>

        <!-- REDESIGNED AIRDROP NOTIFICATION - MATCHES GAME STYLE -->
        <div class="airdrop-notification" id="airdropNotification">
            <div class="airdrop-header">
                <div class="airdrop-icon-container">
                    <img src="../images/VPEmberCoin.PNG" alt="Ember" class="airdrop-ember-icon" onerror="this.textContent='üíé'">
                </div>
                <div class="airdrop-title">$Ember Airdrop!</div>
            </div>
            <div class="airdrop-body">
                <div class="airdrop-amount" id="airdropAmount">500 $Ember</div>
                <div class="airdrop-subtitle">Limited time bonus - collect now!</div>
            </div>
            <button class="airdrop-button" id="airdropClaimButton">
                <span class="airdrop-btn-icon">üíé</span>
                <span>Collect Now</span>
            </button>
        </div>
        
        <!-- Hunt Screen -->
        <div class="hunt-screen" id="huntScreen">
            <div class="map-container" id="mapContainer">
                <div class="phoenix-map" id="phoenixMap">
                    <!-- Map Background Elements -->
                    <div class="map-roads">
                        <!-- Major Highways -->
                        <div class="highway highway-i10"></div>
                        <div class="highway highway-i17"></div>
                        <!-- Streets -->
                        <div class="street central-ave"></div>
                        <div class="street camelback-rd"></div>
                        <div class="street mcdowell-rd"></div>
                        <div class="street thomas-rd"></div>
                    </div>
                    
                    <!-- City Districts -->
                    <div class="city-districts">
                        <div class="district downtown"></div>
                        <div class="district scottsdale"></div>
                        <div class="district tempe"></div>
                        <div class="district glendale"></div>
                    </div>
                    
                    <!-- Landmarks -->
                    <div class="landmarks">
                        <div class="landmark chase-field" title="Chase Field"></div>
                        <div class="landmark airport" title="Sky Harbor Airport"></div>
                        <div class="landmark camelback-mountain" title="Camelback Mountain"></div>
                        <div class="landmark papago-park" title="Papago Park"></div>
                    </div>
                    
                    <!-- Token Markers Container -->
                    <div class="token-markers" id="tokenMarkers"></div>
                    
                    <!-- FIXED: Player Location - Now inside map so it moves with map -->
                    <div class="player-location" id="playerLocation"></div>
                </div>
            </div>
            
            <!-- Map Controls -->
            <div class="map-controls">
                <button class="map-control-btn" id="zoomInBtn">+</button>
                <button class="map-control-btn" id="zoomOutBtn">-</button>
                <button class="map-control-btn center-btn" id="centerMapBtn">üéØ</button>
            </div>
        </div>

        <!-- AR View Screen -->
        <div class="ar-screen" id="arScreen" style="display: none;">
            <video id="cameraVideo" autoplay muted playsinline></video>
            <div class="ar-overlay">
                <div class="ar-tokens-container" id="arTokensContainer"></div>
                <div class="ar-ui" id="arUI">
                    <div class="ar-instructions">
                        <div class="ar-icon">üì±</div>
                        <div class="ar-text">
                            <div class="ar-title">AR Hunt Mode</div>
                            <div class="ar-subtitle">Point camera to collect $Ember tokens</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- IMPROVED VAULT SCREEN -->
        <div class="vault-screen" id="vaultScreen" style="display: none;">
            <div class="vault-container">
                <div class="vault-header">
                    <div class="vault-title">
                        <div class="vault-icon">
                            <img src="../images/PhoenixSafe.PNG" alt="Vault" class="vault-icon-image" onerror="this.textContent='üîí'">
                        </div>
                        $Ember Vault
                    </div>
                    <div class="vault-balance">
                        <div class="vault-balance-text" id="vaultBalance">0 $Ember Tokens</div>
                        <div class="vault-usd-value" id="vaultUsdValue">$0.00 USD</div>
                    </div>
                </div>
                
                <div class="vault-actions">
                    <button class="vault-action-btn" id="coinbaseTransferBtn">
                        <span class="vault-btn-icon">üè¶</span>
                        <span>Transfer to Coinbase</span>
                    </button>
                    <button class="vault-action-btn secondary" id="redeemQRBtn">
                        <span class="vault-btn-icon">üì±</span>
                        <span>Payment QR</span>
                    </button>
                </div>

                <div class="vault-stats">
                    <div class="vault-stats-title">Collection Statistics</div>
                    <div class="vault-stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalCollected">0</div>
                            <div class="stat-label">Tokens Collected</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="locationsVisited">0</div>
                            <div class="stat-label">Locations Visited</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalValue">$0.00</div>
                            <div class="stat-label">Total Value</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="lastActivity">Never</div>
                            <div class="stat-label">Last Activity</div>
                        </div>
                    </div>
                </div>
                
                <div class="vault-receipts-section">
                    <div class="vault-stats-title">Recent Activity</div>
                    <div class="token-history" id="tokenHistory">
                        <div class="history-placeholder">
                            <div class="history-placeholder-icon">üó∫Ô∏è</div>
                            <div class="history-placeholder-title">No Tokens Collected Yet</div>
                            <div class="history-placeholder-text">Start exploring to find $Ember tokens!</div>
                        </div>
                    </div>
                </div>
                
                <!-- Vault padding bottom for token slider -->
                <div class="vault-bottom-padding"></div>
            </div>
        </div>

        <!-- Ember Tokens Nearby Slider (Appears on all screens) -->
        <div class="token-locations-module collapsed" id="tokenLocationsModule">
            <div class="swipe-handle" id="swipeHandle">
                <div class="handle-bar"></div>
                <div class="handle-text">
                    <span class="handle-title">
                        <div class="ember-icons-container">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="ember-icon" onerror="this.textContent='üíé'">
                            <img src="../images/VPEmberFlame.svg" alt="Ember Flame" class="ember-icon" onerror="this.textContent='üî•'">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="ember-icon" onerror="this.textContent='üíé'">
                            <img src="../images/VPEmberFlame.svg" alt="Ember Flame" class="ember-icon" onerror="this.textContent='üî•'">
                        </div>
                        $Ember Tokens Nearby
                    </span>
                    <span class="handle-count" id="nearbyTokenCount">Get closer</span>
                </div>
            </div>
            <div class="module-content" id="moduleContent">
                <div class="module-header">
                    <div class="module-title">
                        <img src="../images/VPEmberCoin.PNG" alt="Ember" class="module-ember-icon" onerror="this.textContent='üíé'">
                        Collectable Tokens
                    </div>
                    <div class="total-available" id="totalAvailable">Ready for collection</div>
                </div>
                <div class="token-locations-list" id="tokenLocationsList">
                    <!-- Token locations will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-tabs">
                <div class="nav-tab active" data-mode="hunt" id="tabHunt">
                    <div class="nav-tab-icon">üó∫Ô∏è</div>
                    <div class="nav-tab-label">Hunt</div>
                </div>
                <div class="nav-tab" data-mode="ar" id="tabAR">
                    <div class="nav-tab-icon">üì±</div>
                    <div class="nav-tab-label">AR View</div>
                </div>
                <div class="nav-tab" data-mode="vault" id="tabVault">
                    <div class="nav-tab-icon">üîí</div>
                    <div class="nav-tab-label">Vault</div>
                </div>
            </div>
        </nav>

        <!-- POLISHED: Token Collection Modal with improved layout -->
        <div class="token-modal" id="tokenModal" style="display: none;">
            <div class="token-modal-content">
                <div class="token-modal-header">
                    <div class="token-found-title" id="tokenFoundTitle">
                        <span>üî• $Ember Token Found!</span>
                    </div>
                    <div class="token-amount-badge" id="tokenAmountBadge">500 $Ember</div>
                </div>
                
                <div class="token-preview">
                    <div class="token-image">
                        <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="token-coin-img" onerror="this.textContent='üíé'">
                    </div>
                    <div class="token-details">
                        <div class="token-amount" id="discoveredTokenAmount">500 $Ember</div>
                        <div class="token-usd-value" id="discoveredTokenUSD">~$0.50 USD</div>
                        <div class="token-location" id="discoveredTokenLocation">Downtown Phoenix</div>
                    </div>
                </div>
                
                <!-- EXPANDABLE SPONSOR MESSAGE -->
                <div class="sponsor-message" id="sponsorMessage">
                    <div class="sponsor-title" id="sponsorTitle">Sponsored by Phoenix Plaza</div>
                    <div class="sponsor-text" id="sponsorText">Exclusive downtown experience awaits!</div>
                    
                    <!-- EXPANDABLE DETAILS SECTION -->
                    <div class="sponsor-details-expandable" id="sponsorDetailsExpandable" style="display: none;">
                        <div class="sponsor-description" id="sponsorDescription">
                            Experience VIP access to downtown events, priority parking, and exclusive dining experiences.
                        </div>
                        
                        <!-- REDEMPTION OPTIONS -->
                        <div class="redemption-section-compact">
                            <div class="redemption-title-compact">Redeem Your $Ember For:</div>
                            <div class="redemption-options-compact" id="redemptionOptionsCompact">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <!-- IMPROVED: Location Actions with better spacing -->
                        <div class="location-actions">
                            <button class="location-action-btn primary" id="getDirectionsBtn">
                                <span>üó∫Ô∏è</span>
                                <span>Get Directions</span>
                            </button>
                            <button class="location-action-btn secondary" id="learnMoreWebsiteBtn">
                                <span>üåê</span>
                                <span>Learn More</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- LEARN MORE TOGGLE BUTTON -->
                    <button class="learn-more-toggle" id="learnMoreToggle">
                        <span class="toggle-text" id="toggleText">Learn More</span>
                        <span class="toggle-icon" id="toggleIcon">‚ñº</span>
                    </button>
                </div>
                
                <div class="token-actions" id="tokenActions">
                    <button class="token-action-btn" id="collectTokenBtn">
                        <span>üíé</span>
                        <span>Collect $Ember</span>
                    </button>
                    <button class="token-action-btn secondary" id="closeTokenModalBtn">
                        <span>‚úï</span>
                        <span>Close</span>
                    </button>
                </div>
                
                <div class="token-collection-actions" style="display: none;" id="tokenCollectionActions">
                    <button class="token-action-btn" id="goToVaultBtn">
                        <span>üîí</span>
                        <span>Go to Vault</span>
                    </button>
                    <button class="token-action-btn secondary" id="closeCollectedModalBtn">
                        <span>‚úï</span>
                        <span>Close</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Navigation Modal -->
        <div class="navigation-modal" id="navigationModal" style="display: none;">
            <div class="navigation-content">
                <div class="navigation-header">
                    <div class="navigation-title">
                        <span>üó∫Ô∏è Navigate to Token</span>
                    </div>
                    <div class="navigation-info">
                        <div class="navigation-token-name" id="navTokenName">Phoenix Plaza Central</div>
                        <div class="navigation-distance" id="navDistance">~1.2km away</div>
                        <div class="navigation-ember-amount" id="navEmberAmount">500 $Ember</div>
                    </div>
                </div>
                
                <div class="navigation-options">
                    <div class="navigation-option" id="navWalking">
                        <div class="navigation-option-icon">üö∂</div>
                        <div class="navigation-option-text">
                            <div class="navigation-option-title">Walking</div>
                            <div class="navigation-option-time" id="navWalkTime">~15 min</div>
                        </div>
                    </div>
                    
                    <div class="navigation-option" id="navDriving">
                        <div class="navigation-option-icon">üöó</div>
                        <div class="navigation-option-text">
                            <div class="navigation-option-title">Driving</div>
                            <div class="navigation-option-time" id="navDriveTime">~5 min</div>
                        </div>
                    </div>
                    
                    <div class="navigation-option ar-option" id="navAR" style="display: none;">
                        <div class="navigation-option-icon">üì±</div>
                        <div class="navigation-option-text">
                            <div class="navigation-option-title">Collect $Ember</div>
                            <div class="navigation-option-time">Available Now</div>
                        </div>
                    </div>
                </div>
                
                <button class="navigation-close" id="navClose">Close</button>
            </div>
        </div>

        <!-- Reset Game Confirmation Modal -->
        <div class="reset-game-overlay" id="resetGameOverlay" style="display: none;">
            <div class="reset-game-modal">
                <div class="reset-game-modal-title">üîÑ Reset Game Progress</div>
                <div class="reset-game-modal-text">
                    Are you sure you want to reset your game progress? This will:
                    <br><br>
                    ‚Ä¢ Clear all collected $Ember tokens<br>
                    ‚Ä¢ Reset vault balance to $0.00<br>
                    ‚Ä¢ Clear token history<br>
                    <br>
                    <strong>This action cannot be undone!</strong>
                </div>
                <div class="reset-game-modal-actions">
                    <button class="reset-game-modal-btn reset-game-modal-cancel" id="cancelResetGame">Cancel</button>
                    <button class="reset-game-modal-btn reset-game-modal-confirm" id="confirmResetGame">Reset Game</button>
                </div>
            </div>
        </div>

        <!-- Logout Confirmation -->
        <div class="logout-overlay" id="logoutOverlay" style="display: none;">
            <div class="logout-modal">
                <div class="logout-modal-title">üö™ Sign Out</div>
                <div class="logout-modal-text">
                    Are you sure you want to sign out? Your $Ember tokens will be saved securely in your vault.
                </div>
                <div class="logout-modal-actions">
                    <button class="logout-modal-btn logout-modal-cancel" id="cancelLogout">Cancel</button>
                    <button class="logout-modal-btn logout-modal-confirm" id="confirmLogout">Sign Out</button>
                </div>
            </div>
        </div>
        
        <!-- QR Modal -->
        <div class="qr-modal" id="qrModal" style="display: none;">
            <div class="qr-modal-content">
                <div class="qr-modal-header">
                    <h3 id="qrModalTitle">üî• Payment QR Code</h3>
                    <button class="qr-close" id="qrClose">‚úï</button>
                </div>
                
                <div class="qr-code-container">
                    <div class="qr-placeholder" id="qrPlaceholder">
                        <div class="qr-icon">
                            <img src="../images/VPEmberCoin.PNG" alt="QR Code" class="qr-ember-icon" onerror="this.textContent='üíé'">
                        </div>
                        <div id="qrCodeContent">Payment QR Code<br>
                        <small>Show this at partner locations</small></div>
                    </div>
                </div>
                
                <div class="qr-instructions" id="qrInstructions">
                    Show this QR code at any Vault Phoenix partner location to pay with your $Ember tokens!
                </div>
                
                <div class="qr-token-info">
                    <div class="qr-token-amount" id="qrTokenAmount">0 $Ember</div>
                    <div class="qr-token-value" id="qrTokenValue">$0.00 USD</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="dashboard.js"></script>
</body>
</html>
