<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Vault Phoenix - AR Crypto Gaming Dashboard</title>
    
    <!-- CRITICAL: Session protection MUST load first -->
    <script src="session-protection.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="icon" href="../images/VPLogoNoText.PNG" type="image/png">
</head>
<body class="crypto-dashboard-page">
    <!-- CRYPTO GAME PROTECTION FLAG -->
    <div id="cryptoGameFlag" style="display: none;">CRYPTO_GAME_PAGE</div>
    
    <div id="container">
        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner"></div>
            <div class="loading-text">Initializing AR $Ember Hunt...</div>
        </div>

        <!-- Welcome Button -->
        <button id="welcomeBtn" class="welcome-button" style="display: none;">
            <span class="welcome-icon">
                <img src="../images/VPEmberFlame.svg" alt="Ember Flame" class="welcome-flame-icon" onerror="this.textContent='üî•'">
            </span>
            <span class="welcome-text">Welcome Back, Hunter!</span>
            <span class="welcome-subtitle">Preparing Your Adventure</span>
            <div class="welcome-loading-bar">
                <div class="welcome-loading-fill" id="welcomeLoadingFill"></div>
            </div>
            <div class="welcome-loading-text" id="welcomeLoadingText">Loading Game...</div>
        </button>
        
        <!-- Base Content Layers -->
        <div id="map" style="display: block;">
            <!-- Google Maps Container -->
            <div id="googleMapContainer" class="google-map-container">
                <!-- Map will be initialized here by JavaScript -->
                <div class="map-loading-overlay" id="mapLoadingOverlay">
                    <div class="map-loading-spinner"></div>
                    <div>Loading Phoenix Map...</div>
                </div>
            </div>
            
            <!-- Map Overlay UI -->
            <div class="map-overlay-ui">
                <div class="current-location-card">
                    <div class="location-header">
                        <div class="location-icon">üìç</div>
                        <div class="location-info">
                            <div class="location-title">GPS Active</div>
                            <div class="location-coords">
                                <span id="currentLat">33.4484</span>, <span id="currentLng">-112.0740</span>
                            </div>
                        </div>
                        <div class="location-status">
                            <div class="status-dot active"></div>
                            <span>Ready</span>
                        </div>
                    </div>
                    <div class="campaign-info">
                        <div class="campaign-text">Total Token Locations</div>
                        <div class="token-count" id="availableTokenCount">10 available</div>
                    </div>
                </div>
            </div>
        </div>
        
        <video id="video" autoplay muted playsinline style="display: none;"></video>
        <canvas id="canvas" style="display: none;"></canvas>
        
        <!-- AR Ember Coin -->
        <div class="ar-ember-coin" id="arEmberCoin">
            <div class="ember-coin-icon">
                <img src="../images/VPEmberCoin.PNG" alt="AR Ember Coin" class="ar-coin-image" onerror="this.textContent='üíé'">
            </div>
        </div>

        <!-- ENHANCED AIRDROP NOTIFICATION -->
        <div class="airdrop-notification" id="airdropNotification">
            <div class="airdrop-icon">ü™Ç</div>
            <div class="airdrop-content">
                <div class="airdrop-title">$Ember Air Drop!</div>
                <div class="airdrop-subtitle">Limited time bonus available</div>
            </div>
            <button class="airdrop-button" id="airdropClaimButton">
                <span>üíé</span>
                Claim Airdrop
            </button>
        </div>
        
        <!-- Navigation -->
        <nav class="navigation">
            <div class="nav-content">
                <div class="nav-brand">
                    <div class="nav-logo" id="homeBtn">
                        <img src="../images/VPLogoNoText.PNG" alt="Phoenix Logo" class="nav-logo-image" onerror="this.textContent='üî•'">
                    </div>
                    <div class="nav-title">$Ember Hunt</div>
                </div>
                <div class="nav-actions">
                    <div class="vault-badge" id="vaultBadge">
                        <div class="badge-icon">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Count" class="badge-coin-icon" onerror="this.textContent='üíé'">
                        </div>
                        <span class="badge-count" id="navEmberCount">0</span>
                    </div>
                    <button class="nav-menu-button" id="menuToggle">
                        <span id="menuIcon">‚ò∞</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Side Menu -->
        <div class="menu-overlay" id="menuOverlay"></div>
        <div class="side-menu" id="sideMenu">
            <div class="menu-header">
                <div class="menu-user">
                    <div class="menu-avatar" id="menuAvatar">
                        <img src="../images/VPLogoNoText.PNG" alt="Avatar" class="avatar-image" onerror="this.textContent='üî•'">
                    </div>
                    <div class="menu-user-info">
                        <div class="menu-user-name">Phoenix Hunter</div>
                        <div class="menu-user-email" id="menuUserEmail">demo@vaultphoenix.com</div>
                    </div>
                </div>
            </div>
            
            <div class="menu-content">
                <div class="menu-section">
                    <div class="menu-section-title">Gaming</div>
                </div>
                
                <div class="menu-item active" data-mode="map" id="menuMap">
                    <div class="menu-item-icon">üó∫Ô∏è</div>
                    <div class="menu-item-text">Token Hunt</div>
                </div>
                
                <div class="menu-item" data-mode="ar" id="menuAR">
                    <div class="menu-item-icon image" style="background-image: url('../images/IphoneVPLogo.PNG')">üì±</div>
                    <div class="menu-item-text">AR Discovery</div>
                    <div class="menu-item-badge" id="nearbyTokens">Get closer</div>
                </div>
                
                <div class="menu-item" data-mode="vault" id="menuVault">
                    <div class="menu-item-icon image" style="background-image: url('../images/PhoenixSafe.PNG')">üîí</div>
                    <div class="menu-item-text">$Ember Vault</div>
                    <div class="menu-item-badge" id="menuEmberCount">0</div>
                </div>
                
                <div class="menu-item" data-mode="rewards" id="menuRewards">
                    <div class="menu-item-icon">üéØ</div>
                    <div class="menu-item-text">Challenges & Rewards</div>
                    <div class="menu-item-badge" id="rewardsBadge">2 Active</div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Adventures</div>
                </div>
                
                <div class="menu-item" id="adventuresOverlay">
                    <div class="menu-item-icon image" style="background-image: url('../images/PhoenixGoldTrophy.PNG')">üèÜ</div>
                    <div class="menu-item-text">Themed Adventures</div>
                    <div class="menu-item-badge">3 Active</div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Wallet</div>
                </div>
                
                <div class="menu-item" id="coinbaseWallet">
                    <div class="menu-item-icon">üè¶</div>
                    <div class="menu-item-text">Coinbase Wallet</div>
                </div>
                
                <div class="menu-item" id="redeemTokens">
                    <div class="menu-item-icon">üì±</div>
                    <div class="menu-item-text">Payment QR</div>
                </div>
                
                <div class="menu-section">
                    <div class="menu-section-title">Settings</div>
                </div>
                
                <div class="menu-item reset-game-item" id="resetGameBtn">
                    <div class="menu-item-icon">üîÑ</div>
                    <div class="menu-item-text">Reset Game</div>
                </div>
            </div>
            
            <div class="logout-section">
                <button class="logout-button" id="sideMenuLogout">
                    <span>üö™</span>
                    <span>Sign Out</span>
                </button>
            </div>
        </div>
        
        <!-- UNIVERSAL TOKEN LOCATIONS MODULE - SHOWS ON ALL SCREENS -->
        <div class="token-locations-module collapsed" id="tokenLocationsModule">
            <div class="swipe-handle" id="swipeHandle">
                <div class="handle-bar"></div>
                <div class="handle-text">
                    <span class="handle-title">
                        <div class="ember-icons-container">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="ember-icon" onerror="this.textContent='üíé'">
                            <img src="../images/VPEmberFlame.svg" alt="Ember Flame" class="ember-icon" onerror="this.textContent='üî•'">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="ember-icon" onerror="this.textContent='üíé'">
                            <img src="../images/VPEmberFlame.svg" alt="Ember Flame" class="ember-icon" onerror="this.textContent='üî•'">
                        </div>
                        $Ember Tokens Nearby
                    </span>
                    <span class="handle-count" id="nearbyTokenCount">Explore locations</span>
                </div>
            </div>
            <div class="module-content" id="moduleContent">
                <div class="module-header">
                    <div class="module-title">
                        <img src="../images/VPEmberCoin.PNG" alt="Ember" class="module-ember-icon" onerror="this.textContent='üíé'">
                        Token Locations
                    </div>
                    <div class="total-available" id="totalAvailable">10 total available</div>
                </div>
                <div class="token-locations-list" id="tokenLocationsList">
                    <!-- Token locations will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Status Panel - FOR AR MODE ONLY -->
        <div class="status-panel" id="statusPanel">
            <div class="status-grid">
                <div class="status-item">
                    <div class="status-label">GPS Status</div>
                    <div class="status-value" id="gpsStatus">
                        <div class="status-indicator">
                            <div class="status-dot active"></div>
                            <span>Ready to hunt!</span>
                        </div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">Available Tokens</div>
                    <div class="status-value" id="availableTokens">10 Available</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Location</div>
                    <div class="status-value">
                        <span id="lat">33.4484</span>, <span id="lng">-112.0740</span>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">Heading</div>
                    <div class="status-value"><span id="heading">--</span>¬∞</div>
                    <div class="compass-container">
                        <div class="compass">
                            <div class="compass-needle" id="compassNeedle"></div>
                            <div class="compass-center"></div>
                            <div class="compass-n">N</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AR Instructions -->
        <div class="ar-instructions" id="arInstructions">
            <div class="ar-instructions-title">üî• AR Hunt Mode</div>
            <div class="ar-instructions-text">Point your camera around and tap the glowing $Ember coin to collect tokens!</div>
        </div>
        
        <!-- Token Discovery Modal -->
        <div class="token-discovery" id="tokenDiscovery">
            <div class="token-discovery-content">
                <div class="token-discovery-header">
                    <div class="token-found-title">
                        <div class="token-found-icon">
                            <img src="../images/VPEmberFlame.svg" alt="Found" class="found-flame-icon" onerror="this.textContent='üî•'">
                        </div>
                        <span>$Ember Token Found!</span>
                    </div>
                    <div class="token-amount-badge" id="tokenAmountBadge">500 $Ember</div>
                </div>
                
                <div class="sponsor-info-front" id="sponsorInfoFront">
                    <div class="sponsor-message">
                        <div class="sponsor-title">Sponsored by Phoenix Suns Arena</div>
                        <div class="sponsor-text">Exclusive courtside experience awaits!</div>
                    </div>
                    
                    <div class="token-preview">
                        <div class="token-image">
                            <img src="../images/VPEmberCoin.PNG" alt="Ember Coin" class="token-coin-img" onerror="this.textContent='üíé'">
                        </div>
                        <div class="token-details">
                            <div class="token-amount" id="discoveredTokenAmount">500 $Ember</div>
                            <div class="token-usd-value" id="discoveredTokenUSD">~$0.50 USD</div>
                            <div class="token-location" id="discoveredTokenLocation">Downtown Phoenix</div>
                        </div>
                    </div>
                    
                    <div class="token-actions">
                        <button class="token-action-btn" id="collectTokenBtn">
                            <span>üíé</span>
                            <span>Collect $Ember</span>
                        </button>
                        <button class="token-action-btn secondary" id="sponsorInfoBtn">
                            <span>‚ÑπÔ∏è</span>
                            <span>Learn More</span>
                        </button>
                    </div>
                </div>

                <div class="sponsor-info-back" id="sponsorInfoBack">
                    <div class="sponsor-details">
                        <div class="sponsor-logo">
                            <div class="sponsor-logo-placeholder">üèÄ</div>
                        </div>
                        <div class="sponsor-name" id="sponsorDetailsName">Phoenix Suns Arena</div>
                        <div class="sponsor-description" id="sponsorDetailsDescription">
                            Experience the thrill of NBA basketball with exclusive courtside seats, VIP dining, and behind-the-scenes arena tours.
                        </div>
                        
                        <div class="sponsor-offers">
                            <div class="offer-item">
                                <span class="offer-icon">üé´</span>
                                <span>Game Tickets</span>
                            </div>
                            <div class="offer-item">
                                <span class="offer-icon">üçΩÔ∏è</span>
                                <span>VIP Dining</span>
                            </div>
                            <div class="offer-item">
                                <span class="offer-icon">üéØ</span>
                                <span>Arena Tours</span>
                            </div>
                        </div>
                        
                        <button class="sponsor-back-btn" id="sponsorBackBtn">
                            <span>‚¨ÖÔ∏è</span>
                            <span>Back to Token</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Reset Game Confirmation Modal -->
        <div class="reset-game-overlay" id="resetGameOverlay">
            <div class="reset-game-modal">
                <div class="reset-game-modal-title">üîÑ Reset Game Progress</div>
                <div class="reset-game-modal-text">
                    Are you sure you want to reset your game progress? This will:
                    <br><br>
                    ‚Ä¢ Clear all collected $Ember tokens<br>
                    ‚Ä¢ Reset adventure progress<br>
                    ‚Ä¢ Clear token history<br>
                    ‚Ä¢ Reset vault balance to $0.00<br>
                    <br>
                    <strong>This action cannot be undone!</strong>
                </div>
                <div class="reset-game-modal-actions">
                    <button class="reset-game-modal-btn reset-game-modal-cancel" id="cancelResetGame">Cancel</button>
                    <button class="reset-game-modal-btn reset-game-modal-confirm" id="confirmResetGame">Reset Game</button>
                </div>
            </div>
        </div>
        
        <!-- $Ember Vault View - COMPLETE RESTORATION -->
        <div class="vault-view" id="vaultView" style="display: none;">
            <div class="vault-container">
                <div class="vault-header">
                    <div class="vault-title">
                        <div class="vault-title-icon">
                            <img src="../images/PhoenixSafe.PNG" alt="Vault" class="vault-icon-image" onerror="this.textContent='üîí'">
                        </div>
                        $Ember Vault
                    </div>
                    <div class="vault-balance">
                        <div class="vault-balance-text" id="vaultBalance">0 $Ember Tokens</div>
                        <div class="vault-usd-value" id="vaultUsdValue">$0.00 USD</div>
                    </div>
                </div>
                
                <div class="vault-actions">
                    <button class="vault-action-btn" id="coinbaseTransferBtn">
                        <div class="vault-btn-icon">üè¶</div>
                        <span>Transfer to Coinbase</span>
                    </button>
                    <button class="vault-action-btn secondary" id="redeemQRBtn">
                        <div class="vault-btn-icon">üì±</div>
                        <span>Payment QR</span>
                    </button>
                </div>

                <div class="vault-stats-section">
                    <div class="vault-stats-title">
                        <div class="vault-title-icon">
                            <img src="../images/EmberAnalytics.PNG" alt="Analytics" class="vault-icon-image" onerror="this.textContent='üìä'">
                        </div>
                        Transaction History
                    </div>
                    <div class="vault-stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalCollected">0</div>
                            <div class="stat-label">Tokens Collected</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="locationsVisited">0</div>
                            <div class="stat-label">Locations Visited</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalValue">$0.00</div>
                            <div class="stat-label">Total Value</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="lastActivity">Never</div>
                            <div class="stat-label">Last Activity</div>
                        </div>
                    </div>
                </div>
                
                <div class="vault-filters">
                    <button class="filter-btn active" data-filter="all">All Tokens</button>
                    <button class="filter-btn" data-filter="high">High Value</button>
                    <button class="filter-btn" data-filter="medium">Medium Value</button>
                    <button class="filter-btn" data-filter="low">Low Value</button>
                </div>
                
                <div class="token-history" id="tokenHistory">
                    <div class="history-item">
                        <div class="history-icon">
                            <img src="../images/VPEmberCoin.PNG" alt="Welcome Bonus" class="history-coin-icon" onerror="this.textContent='üíé'">
                        </div>
                        <div class="history-details">
                            <div class="history-title">Welcome Bonus</div>
                            <div class="history-subtitle">Vault Phoenix HQ ‚Ä¢ Today ‚Ä¢ LOW</div>
                        </div>
                        <div class="history-value">+50</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: Challenges & Rewards Hub View -->
        <div class="rewards-view" id="rewardsView" style="display: none;">
            <div class="rewards-container">
                <div class="rewards-header">
                    <div class="rewards-title">
                        <div class="rewards-title-icon">
                            <span class="rewards-icon">üéØ</span>
                        </div>
                        Challenges & Rewards Hub
                    </div>
                    <div class="rewards-subtitle">Complete challenges to earn $Ember rewards and redeem at partner locations</div>
                </div>

                <!-- Daily Challenges Section -->
                <div class="challenges-section">
                    <div class="section-header">
                        <div class="section-title">
                            <span class="section-icon">‚ö°</span>
                            <span>Daily Challenges</span>
                        </div>
                        <div class="section-timer" id="dailyTimer">Resets in 14:32:15</div>
                    </div>

                    <div class="challenges-grid" id="dailyChallenges">
                        <div class="challenge-card daily-challenge" data-challenge-id="daily-1">
                            <div class="challenge-header">
                                <div class="challenge-icon">üó∫Ô∏è</div>
                                <div class="challenge-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 60%"></div>
                                    </div>
                                    <div class="progress-text">3/5</div>
                                </div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">Token Explorer</div>
                                <div class="challenge-description">Collect 5 tokens in different locations</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üíé</span>
                                    <span>250 $Ember</span>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-card daily-challenge" data-challenge-id="daily-2">
                            <div class="challenge-header">
                                <div class="challenge-icon">üì±</div>
                                <div class="challenge-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 100%"></div>
                                    </div>
                                    <div class="progress-text">READY</div>
                                </div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">AR Master</div>
                                <div class="challenge-description">Use AR mode to collect 3 tokens</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üíé</span>
                                    <span>150 $Ember</span>
                                </div>
                            </div>
                            <button class="challenge-claim-btn" data-reward="150">Claim Reward</button>
                        </div>
                    </div>
                </div>

                <!-- Location Challenges Section -->
                <div class="challenges-section">
                    <div class="section-header">
                        <div class="section-title">
                            <span class="section-icon">üìç</span>
                            <span>Location Missions</span>
                        </div>
                        <div class="section-badge">Sponsor Driven</div>
                    </div>

                    <div class="challenges-grid" id="locationChallenges">
                        <div class="challenge-card location-challenge" data-challenge-id="location-1">
                            <div class="challenge-sponsor">
                                <div class="sponsor-logo">üèÄ</div>
                                <div class="sponsor-name">Phoenix Suns Arena</div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">Arena VIP Experience</div>
                                <div class="challenge-description">Visit Chase Field and collect special game day tokens</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üé´</span>
                                    <span>VIP Game Tickets + 500 $Ember</span>
                                </div>
                            </div>
                            <div class="challenge-actions">
                                <button class="challenge-navigate-btn" data-location="chase-field">Navigate</button>
                                <button class="challenge-qr-btn" data-challenge="arena-vip">QR Redeem</button>
                            </div>
                        </div>

                        <div class="challenge-card location-challenge" data-challenge-id="location-2">
                            <div class="challenge-sponsor">
                                <div class="sponsor-logo">üçï</div>
                                <div class="sponsor-name">Local Pizza Co.</div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">Foodie Adventure</div>
                                <div class="challenge-description">Show QR code for 20% off your meal</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üçΩÔ∏è</span>
                                    <span>20% Off + 100 $Ember</span>
                                </div>
                            </div>
                            <div class="challenge-actions">
                                <button class="challenge-digital-btn" data-url="https://localpizza.com/ember-deal">Shop Online</button>
                                <button class="challenge-qr-btn" data-challenge="foodie-deal">QR Redeem</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weekly Challenges Section -->
                <div class="challenges-section">
                    <div class="section-header">
                        <div class="section-title">
                            <span class="section-icon">üèÜ</span>
                            <span>Weekly Challenges</span>
                        </div>
                        <div class="section-timer" id="weeklyTimer">Resets in 4 days</div>
                    </div>

                    <div class="challenges-grid" id="weeklyChallenges">
                        <div class="challenge-card weekly-challenge" data-challenge-id="weekly-1">
                            <div class="challenge-header">
                                <div class="challenge-icon">üåü</div>
                                <div class="challenge-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 40%"></div>
                                    </div>
                                    <div class="progress-text">2/5</div>
                                </div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">Phoenix Explorer</div>
                                <div class="challenge-description">Visit 5 different Phoenix districts this week</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üíé</span>
                                    <span>1,000 $Ember + Bonus Pack</span>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-card weekly-challenge" data-challenge-id="weekly-2">
                            <div class="challenge-header">
                                <div class="challenge-icon">üéÆ</div>
                                <div class="challenge-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 80%"></div>
                                    </div>
                                    <div class="progress-text">8/10</div>
                                </div>
                            </div>
                            <div class="challenge-info">
                                <div class="challenge-title">Gaming Streak</div>
                                <div class="challenge-description">Play 10 days consecutively</div>
                                <div class="challenge-reward">
                                    <span class="reward-icon">üî•</span>
                                    <span>Streak Multiplier x2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rewards Earned Section -->
                <div class="rewards-earned-section">
                    <div class="section-header">
                        <div class="section-title">
                            <span class="section-icon">üéÅ</span>
                            <span>Rewards Earned</span>
                        </div>
                        <div class="section-count" id="rewardsCount">3 Available</div>
                    </div>

                    <div class="rewards-list" id="earnedRewardsList">
                        <div class="reward-item claimed" data-reward-id="reward-1">
                            <div class="reward-icon">üé´</div>
                            <div class="reward-info">
                                <div class="reward-title">Free Coffee</div>
                                <div class="reward-description">Local Coffee Co. - Valid until Dec 31</div>
                                <div class="reward-value">Worth $5.00</div>
                            </div>
                            <div class="reward-actions">
                                <button class="reward-qr-btn" data-reward="coffee-free">Show QR</button>
                                <div class="reward-status">‚úÖ Claimed</div>
                            </div>
                        </div>

                        <div class="reward-item pending" data-reward-id="reward-2">
                            <div class="reward-icon">üçï</div>
                            <div class="reward-info">
                                <div class="reward-title">Pizza Discount</div>
                                <div class="reward-description">20% off any large pizza</div>
                                <div class="reward-value">Save up to $6.00</div>
                            </div>
                            <div class="reward-actions">
                                <button class="reward-qr-btn" data-reward="pizza-discount">Show QR</button>
                                <div class="reward-status">üîÑ Ready to use</div>
                            </div>
                        </div>

                        <div class="reward-item pending" data-reward-id="reward-3">
                            <div class="reward-icon">üõçÔ∏è</div>
                            <div class="reward-info">
                                <div class="reward-title">Shopping Voucher</div>
                                <div class="reward-description">$10 off purchases over $50</div>
                                <div class="reward-value">Worth $10.00</div>
                            </div>
                            <div class="reward-actions">
                                <button class="reward-digital-btn" data-url="https://shop.example.com/ember">Shop Online</button>
                                <div class="reward-status">üîÑ Ready to use</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Adventures Overlay Module (replaces the old campaigns view) -->
        <div class="adventures-overlay" id="adventuresOverlay" style="display: none;">
            <div class="adventures-overlay-content">
                <div class="adventures-header">
                    <div class="adventures-title">
                        <span class="adventures-icon">üèÜ</span>
                        <span>Themed Adventures</span>
                    </div>
                    <button class="adventures-close" id="adventuresClose">‚úï</button>
                </div>

                <div class="adventures-list">
                    <div class="adventure-card" data-adventure="phoenix-sports">
                        <div class="adventure-header">
                            <div class="adventure-icon">üèÄ</div>
                            <div class="adventure-info">
                                <div class="adventure-name">Phoenix Sports Trail</div>
                                <div class="adventure-description">Follow the championship path</div>
                            </div>
                            <div class="adventure-status active">ACTIVE</div>
                        </div>
                        <div class="adventure-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 60%"></div>
                            </div>
                            <div class="progress-text">3 of 5 locations visited</div>
                        </div>
                        <div class="adventure-rewards">
                            <span class="reward-badge">+50% $Ember Bonus</span>
                            <span class="reward-badge">VIP Access</span>
                        </div>
                        <button class="adventure-select-btn" data-adventure="phoenix-sports">Continue Adventure</button>
                    </div>

                    <div class="adventure-card" data-adventure="desert-discovery">
                        <div class="adventure-header">
                            <div class="adventure-icon">üåµ</div>
                            <div class="adventure-info">
                                <div class="adventure-name">Desert Discovery</div>
                                <div class="adventure-description">Explore Arizona's natural wonders</div>
                            </div>
                            <div class="adventure-status">AVAILABLE</div>
                        </div>
                        <div class="adventure-details">
                            <div class="adventure-locations">5 unique desert locations</div>
                            <div class="adventure-reward-preview">Exclusive outdoor gear rewards</div>
                        </div>
                        <button class="adventure-select-btn" data-adventure="desert-discovery">Start Adventure</button>
                    </div>

                    <div class="adventure-card" data-adventure="foodie-trail">
                        <div class="adventure-header">
                            <div class="adventure-icon">üç¥</div>
                            <div class="adventure-info">
                                <div class="adventure-name">Foodie Trail</div>
                                <div class="adventure-description">Taste Phoenix's culinary scene</div>
                            </div>
                            <div class="adventure-status">AVAILABLE</div>
                        </div>
                        <div class="adventure-details">
                            <div class="adventure-locations">8 top restaurants & cafes</div>
                            <div class="adventure-reward-preview">Dining discounts & free meals</div>
                        </div>
                        <button class="adventure-select-btn" data-adventure="foodie-trail">Start Adventure</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Modal - MOBILE OPTIMIZED -->
        <div class="navigation-modal" id="navigationModal">
            <div class="navigation-content">
                <div class="navigation-header">
                    <div class="navigation-title">
                        <span>üó∫Ô∏è</span>
                        <span>Navigate to Token</span>
                    </div>
                    <div class="navigation-coin-info">
                        <div class="navigation-coin-value" id="navTokenName">500 $Ember Token</div>
                        <div class="navigation-distance" id="navDistance">~1.2km away</div>
                    </div>
                </div>
                
                <div class="navigation-options">
                    <div class="navigation-option" id="navWalking">
                        <div class="navigation-option-left">
                            <div class="navigation-option-icon">üö∂</div>
                            <div class="navigation-option-info">
                                <div class="navigation-option-title">Walking</div>
                                <div class="navigation-option-subtitle">Apple/Google Maps</div>
                            </div>
                        </div>
                        <div class="navigation-option-time" id="navWalkTime">~15 min</div>
                    </div>
                    
                    <div class="navigation-option" id="navDriving">
                        <div class="navigation-option-left">
                            <div class="navigation-option-icon">üöó</div>
                            <div class="navigation-option-info">
                                <div class="navigation-option-title">Driving</div>
                                <div class="navigation-option-subtitle">Apple/Google Maps</div>
                            </div>
                        </div>
                        <div class="navigation-option-time" id="navDriveTime">~5 min</div>
                    </div>
                    
                    <div class="navigation-option" id="navAR" style="display: none;">
                        <div class="navigation-option-left">
                            <div class="navigation-option-icon">üì±</div>
                            <div class="navigation-option-info">
                                <div class="navigation-option-title">AR Hunt Mode</div>
                                <div class="navigation-option-subtitle">Collect with Camera</div>
                            </div>
                        </div>
                        <div class="navigation-option-time">Available</div>
                    </div>
                </div>
                
                <button class="navigation-close" id="navClose">Close</button>
            </div>
        </div>
        
        <!-- QR Code Modal -->
        <div class="qr-modal" id="qrModal">
            <div class="qr-modal-content">
                <div class="qr-modal-header">
                    <h3 id="qrModalTitle">üî• Payment QR Code</h3>
                    <button class="qr-close" id="qrClose">‚úï</button>
                </div>
                
                <div class="qr-code-container">
                    <div class="qr-placeholder" id="qrPlaceholder">
                        <div class="qr-icon">
                            <img src="../images/VPEmberCoin.PNG" alt="QR Code" class="qr-ember-icon" onerror="this.textContent='üíé'">
                        </div>
                        <div id="qrCodeContent">QR Code will appear here<br>
                        <small>Show this at partner locations</small></div>
                    </div>
                </div>
                
                <div class="qr-instructions" id="qrInstructions">
                    Show this QR code at any Vault Phoenix partner location to pay with your $Ember tokens for real rewards and discounts!
                </div>
                
                <div class="qr-token-info">
                    <div class="qr-token-amount" id="qrTokenAmount">0 $Ember</div>
                    <div class="qr-token-value" id="qrTokenValue">$0.00 USD</div>
                </div>
            </div>
        </div>
        
        <!-- Logout Confirmation -->
        <div class="logout-overlay" id="logoutOverlay">
            <div class="logout-modal">
                <div class="logout-modal-title">üö™ Sign Out</div>
                <div class="logout-modal-text">
                    Are you sure you want to sign out? Your $Ember tokens will be saved securely in your vault.
                </div>
                <div class="logout-modal-actions">
                    <button class="logout-modal-btn logout-modal-cancel" id="cancelLogout">Cancel</button>
                    <button class="logout-modal-btn logout-modal-confirm" id="confirmLogout">Sign Out</button>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation - Updated with Challenges & Rewards Hub -->
        <nav class="bottom-nav">
            <div class="nav-tabs">
                <div class="nav-tab active" data-mode="map" id="tabMap">
                    <div class="nav-tab-icon">üó∫Ô∏è</div>
                    <div class="nav-tab-label">Hunt</div>
                </div>
                <div class="nav-tab" data-mode="ar" id="tabAR">
                    <div class="nav-tab-icon image" style="background-image: url('../images/IphoneVPLogo.PNG')">üì±</div>
                    <div class="nav-tab-label">AR View</div>
                </div>
                <div class="nav-tab" data-mode="vault" id="tabVault">
                    <div class="nav-tab-icon image" style="background-image: url('../images/PhoenixSafe.PNG')">üîí</div>
                    <div class="nav-tab-label">Vault</div>
                </div>
                <div class="nav-tab" data-mode="rewards" id="tabRewards">
                    <div class="nav-tab-icon">üéØ</div>
                    <div class="nav-tab-label">Challenges</div>
                </div>
            </div>
        </nav>
    </div>
    
    <!-- DASHBOARD JAVASCRIPT -->
    <script src="dashboard.js"></script>
</body>
</html>
